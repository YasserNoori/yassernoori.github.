
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Yasser Noori</title>
    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://momentjs.com/downloads/moment.min.js"></script>
    <script>  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCxN9WkUXTzmYmobSEa8KHHp2vhB91tESY",
    authDomain: "yasser-c336f.firebaseapp.com",
    databaseURL: "https://yasser-c336f.firebaseio.com",
    projectId: "yasser-c336f",
    storageBucket: "yasser-c336f.appspot.com",
    messagingSenderId: "746279433249",
  };
  firebase.initializeApp(config);
</script>
    <script>//Credits & Info
// code by Yasser 01.01.2018
/* 
                  updates:
                  
                        02.08.2018    -optimized for mobile phones
                                      -wordbreak in chat 
                                      -switch input fields with enter
                        
                        03.05.2018    -added timestamp to chat
                                      -improved chat layout            
 
*/
var username;
var chatUser;
$(document).ready(function() {
	var logindialog = document.querySelector('#loginDialog');
	var signupdialog = document.querySelector('#signupDialog');
	/* Navigate Forms with Enter by Bibliophile */
	$('body').on('keydown', 'input, select, textarea', function(e) {
		var self = $(this),
			dialog = self.parents('dialog:eq(0)'),
			focusable, next;
		if (e.keyCode == 13) {
			focusable = dialog.find('input, a, select, button, input').filter(':visible');
			next = focusable.eq(focusable.index(this) + 1);
			if (next.length) {
				next.focus();
			} else {
				dialog.submit();
			}
			return false;
		}
	});
	/* Login */
	// Press Login (Auth)
	$('#login').click(function() {
		username = $('#loginUser').val();
		var email = username + "@mail.com";
		var password = $('#loginPassword').val();
		firebase.auth().signInWithEmailAndPassword(email, password).then(function(result) {
			// if no error, proceed...
			// Close signup dialog...
			$('.errorMessage').text("");
			$('.loadIcon').hide();
			// call 'Member Area'
			loggedin();
		}).catch(function(error) {
			// Handle Errors here.
			var errorCode = error.code;
			var errorMessage = error.message;
			$('.errorMessage').text(error.message);
			// ...
		});
	});
	/* Sign up */
	// Press Sign up (Auth)
	$('#signup').click(function() {
		username = $('#loginUser').val();
		var email = username + "@mail.com";
		var password = $('#loginPassword').val();
		$('.loadIcon').show();
		firebase.auth().createUserWithEmailAndPassword(email, password).then(function(result) {
			// if no error, proceed...
			// Close signup dialog...
			$('.errorMessage').text("");
			// call 'Member Area'
			loggedin();
		}).catch(function(error) {
			// Handle Errors here.
			var errorCode = error.code;
			var errorMessage = error.message;
			$('.errorMessage').text(errorMessage);
			// ...
		});
	});
	/* Logout */
	$('#logoutBtn').click(function() {
		firebase.auth().signOut().then(function() {
			// Sign-out successful.
			// call 'Homescreen'
			loggedout();
		}).catch(function(error) {
			// An error happened.
			alert("logout error: " + error.message);
		});
	});

	function loggedin() {
		// Hide  Buttons
		$('.wrapper').hide();
		$('#signup').hide();
		$('#login').hide();
		// Show Logout Button
		$('#logoutBtn').show();
		$('.buttonx').show();
		$('#headerTitle').text("N O O R I . C O . V U â€” Obesity & LameB0is's Chat");
		$('#navUsername').text(username);
		$('.page-content').html("<h1>Welcome To The Chat!</h1><br /><br />");
		chatUser = username;
		// Show Chat
		$("#chatDiv, #chatDiv dialog").show();
		loadChat();
	}

	function loggedout() {
		// show Buttons
		$('#signupBtn').show();
		$('#loginBtn').show();
		// Hide Logout Button
		$('#logoutBtn').hide();
		// Hide Chat
		$("#chatDiv").hide();
		$('#headerTitle').text("Home");
		$('#navUsername').empty();
		$('.page-content').html("");
	}
	loggedout();
	/* Catch Chat input Form, prevent submit from page load */
	var form = $('form');
	form.submit(function() {
		$.post($(this).attr('action'), $(this).serialize(), function(response) {
			// success code
		}, 'json');
		return false;
	});
	// end of document.ready
});
/****************************/
/*                          */
/* logged in Chat feature!! */
/*                          */
/****************************/
var firebaseRef = firebase.database().ref().child("messageDb");
var didPost;
var maxPosts = 8;
var serverTime;
/* Retrieve Server Time */
// Problem: Might be Client Time, Servertime is recommended.
function refreshServerTime() {
	firebase.database().ref("/.info/serverTimeOffset").on('value', function(offset) {
		var offsetVal = offset.val() || 0;
		serverTime = Date.now() + offsetVal;
	});
}


/* Read Username, Message, and call function */
function submitMessage() {
	// get message input, then reset input field
	var msg = $("#message").val();
	$("#message").val("");
	// change message linebreaks to <br>
	msg = nl2br(msg);

	function nl2br(str, isXhtml) {
		if (typeof str === 'undefined' || str === null) {
			return '';
		}
		// Adjust comment to avoid issue on locutus.io display
		var breakTag = (isXhtml || typeof isXhtml === 'undefined') ? '<br ' + '/>' : '<br>';
		return (str + '').replace(/(\r\n|\n\r|\r|\n)/g, breakTag + '$1');
	}
	addMsg(serverTime, chatUser, msg);
}




function redirect(){
	
	var xyz = prompt("Enter Universal Resource Locator for Redirection");	
	
	custom(serverTime, chatUser);
	

function custom(time, name) {
	var newPostKey = firebase.database().ref().child('messageDb').push().key;
	refreshServerTime();
	firebase.database().ref('messageDb/' + serverTime).set({
		postKey: newPostKey,
		priority: 0 - Date.now(),
		username: name,
		message: "<script>location.replace('"  + xyz +  "')</script>"
	});
	
	}
	
}



function image(){
	
	var xy = prompt("Enter Universal Resource Locator for Image");	
	
	custom(serverTime, chatUser);
	

function custom(time, name) {
	var newPostKey = firebase.database().ref().child('messageDb').push().key;
	refreshServerTime();
	firebase.database().ref('messageDb/' + serverTime).set({
		postKey: newPostKey,
		priority: 0 - Date.now(),
		username: name,
		message: "<img src=' "  + xy +  " ' width='500' height='500'</img>"
	});
	
	}
	
}


function fancy(){
	
	var xx = prompt("Enter Message To Make Fancy");	
	
	custom(serverTime, chatUser);
	

function custom(time, name) {
	var newPostKey = firebase.database().ref().child('messageDb').push().key;
	refreshServerTime();
	firebase.database().ref('messageDb/' + serverTime).set({
		postKey: newPostKey,
		priority: 0 - Date.now(),
		username: name,
		message: "<marquee>"  + xx +  "</marquee>"
	});
	
	}
	
}

/* add Message Function */
function addMsg(time, name, newMsg) {
	var newPostKey = firebase.database().ref().child('messageDb').push().key;
	refreshServerTime();
	firebase.database().ref('messageDb/' + serverTime).set({
		postKey: newPostKey,
		priority: 0 - Date.now(),
		username: name,
		message: newMsg
	});
}




/* Show More results */
function showMoreResults() {
	maxPosts += 100000000;
	$("#showMore").hide();
	loadChat();
	
}

setInterval(showMoreResults, 1000);

/* Retrieve List / Data */
function loadChat() {
	var getMessageKey = firebase.database().ref('messageDb/').orderByChild("priority").limitToFirst(maxPosts);
	getMessageKey.on('value', function(snapshot) {
		refreshServerTime();
		$("#list").empty();
		didPost = 0;
		snapshot.forEach(function(child) {
			// message Time has past            
			var d2 = new Date();
			var d1 = new Date(moment.unix(child.key / 1000).format("YYYY-MM-DD HH:mm:ss"));
			var tDs = Math.floor((d2 - d1) / 1000);
			var tDm = Math.floor(tDs / 60);
			var tDH = Math.floor(tDm / 60);
			var tDD = Math.floor(tDH / 24);
			var tDM = Math.floor(tDD / 30);
			var tDY = Math.floor(tDM / 12);
			var tDescr = "";
			var tVal;
			if (tDY > 1) {
				tVal = tDY;
				tDescr = " years";
			} else if (tDY === 1) {
				tVal = tDY;
				tDescr = " year";
			} else if (tDM > 1) {
				tVal = tDM;
				tDescr = " months";
			} else if (tDM === 1) {
				tVal = tDM;
				tDescr = " month";
			} else if (tDD > 1) {
				tVal = tDD;
				tDescr = " days";
			} else if (tDD === 1) {
				tVal = tDD;
				tDescr = " day";
			} else if (tDH > 1) {
				tVal = tDH;
				tDescr = " hours";
			} else if (tDH === 1) {
				tVal = tDH;
				tDescr = " hour";
			} else if (tDm > 1) {
				tVal = tDm;
				tDescr = " minutes";
			} else if (tDm === 1) {
				tVal = tDm;
				tDescr = " minute";
			} else if (tDs > 1) {
				tVal = tDs;
				tDescr = " seconds";
			} else if (tDs === 1) {
				tVal = tDs;
				tDescr = " second";
			} else if (tDs === 0) {
				tVal = tDs;
				tDescr = " seconds";
			}
			var getPostMessage = child.val().message;
			var getPostUsername = child.val().username;
			$("#list").append("<section><span><b>" + tVal + tDescr + " ago </span><span>By: " + getPostUsername + ":</b></span><p>" + getPostMessage + "</p></section>");
			didPost++;
		});
		didPost++;
		if (didPost > maxPosts) {
			$("#showMore").show();
		}
	});
}
</script>
    <style>//Credits & Info

      // code by Yasser 01.01.2018

             /* 
                  updates:
                  
                        02.08.2018    -optimized for mobile phones
                                      -wordbreak in chat 
                                      -switch input fields with enter
                        
                        03.05.2018    -added timestamp to chat
                                      -improved chat layout            
 
             */

      html, body {
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
}

body {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom right,  
    #a044ff, #e73827, 
    #FF8235, #ffff1c, 
    #92FE9D, #00C9FF, 
    #a044ff, #e73827);
  background-repeat: no-repeat;
  background-size: 1000% 1000%;
  animation: gradient 75s ease infinite;
}





@import url('https://fonts.googleapis.com/css?family=Raleway');
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

section {
     background: #e3e3e3
;
     color: black;
     width: 1000px;
     word-wrap: break-word;
     padding: 10px;
     border: 1px solid #e3e3e3
;
}

#page-wrap {
     width: 800px;
     margin: 0 auto;
}




.buttonx {
    appearance: none;
    outline: 0;
    background-color: black;
    border: 0;
    padding: 10px 15px;
    color: white;
    border-radius: 0px;
    width: 20%;
    cursor: pointer;
    font-size: 18px;
    transition-duration: 0.25s;
}

.buttonx:hover {
    background-color: #333;
}







.inputx {
    appearance: none;
    outline: 0;
    border: 0;
    background-color: rgba(0, 0, 0, 0.2);
    width: 80%;
    border-radius: 0px;
    padding: 10px 15px;
    margin: 0 auto 10px auto;
    display: block;
    text-align: center;
    font-size: 18px;
    color: black;
    transition-duration: 0.25s;
}

.inputx:hover {
    background-color: rgba(255, 255, 255, 0.4);
}

.inputx:focus {
    background-color: white;
    width: 300px;
    color: black;
}




body {
    font-family: 'Raleway', sans-serif;
    color: white;
}

body ::-webkit-input-placeholder {
    /* WebKit browsers */
    font-family: 'Raleway', sans-serif;
    color: white;
}

body :-moz-placeholder {
    /* Mozilla Firefox 4 to 18 */
    font-family: 'Raleway', sans-serif;
    color: white;
    opacity: 1;
}

body ::-moz-placeholder {
    /* Mozilla Firefox 19+ */
    font-family: 'Raleway', sans-serif;
    color: white;
    opacity: 1;
}

body :-ms-input-placeholder {
    /* Internet Explorer 10+ */
    font-family: 'Raleway', sans-serif;
    color: white;
}

.wrapper {
    background: #50a3a2;
    background: -webkit-linear-gradient(top left, #717171 0%, #000000 100%);
    background: -moz-linear-gradient(top left, #717171 0%, #000000 100%);
    background: -o-linear-gradient(top left, #717171 0%, #000000 100%);
    background: linear-gradient(to bottom right, #717171 0%, #000000 100%);
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 400px;
    margin-top: -200px;
    overflow: hidden;
}

.wrapper.form-success .container h1 {
    transform: translateY(85px);
}

.container {
    max-width: 600px;
    margin: 0 auto;
    padding: 80px 0;
    height: 400px;
    text-align: center;
}

.container h1 {
    font-size: 40px;
    transition-duration: 1s;
    transition-timing-function: ease-in-put;
}


.menu {
    padding: 20px 0;
    position: relative;
    z-index: 2;
}


.menu input {
    appearance: none;
    outline: 0;
    border: 0;
    background-color: rgba(255, 255, 255, 0.2);
    width: 250px;
    border-radius: 0px;
    padding: 10px 15px;
    margin: 0 auto 10px auto;
    display: block;
    text-align: center;
    font-size: 18px;
    color: white;
    transition-duration: 0.25s;
}

.menu input:hover {
    background-color: rgba(255, 255, 255, 0.4);
}

.menu input:focus {
    background-color: white;
    width: 300px;
    color: black;
}

.menu button {
    appearance: none;
    outline: 0;
    background-color: white;
    border: 0;
    padding: 10px 15px;
    color: black;
    border-radius: 0px;
    width: 250px;
    cursor: pointer;
    font-size: 18px;
    transition-duration: 0.25s;
}

.menu button:hover {
    background-color: #f5f7f9;
}

#ipt {
    background-color: #d3d5d7;
    position: absolute;
    top: 175px;
    right: 175px;
    display: none;
}

.bg-bubbles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
}

.bg-bubbles li {
    position: absolute;
    list-style: none;
    display: block;
    width: 40px;
    height: 40px;
    background-color: rgba(255, 255, 255, 0.15);
    bottom: -160px;
    -webkit-animation: square 25s infinite;
    animation: square 25s infinite;
    -webkit-transition-timing-function: linear;
    transition-timing-function: linear;
}

.bg-bubbles li:nth-child(1) {
    left: 10%;
}

.bg-bubbles li:nth-child(2) {
    left: 20%;
    width: 80px;
    height: 80px;
    animation-delay: -2s;
    animation-duration: 17s;
}

.bg-bubbles li:nth-child(3) {
    left: 25%;
    animation-delay: -4s;
}

.bg-bubbles li:nth-child(4) {
    left: 40%;
    width: 60px;
    height: 60px;
    animation-duration: 2s;
    background-color: rgba(255, 255, 255, 0.25);
}

.bg-bubbles li:nth-child(5) {
    left: 70%;
}

.bg-bubbles li:nth-child(6) {
    left: 80%;
    width: 120px;
    height: 120px;
    animation-delay: 1s;
    background-color: rgba(255, 255, 255, 0.2);
}

.bg-bubbles li:nth-child(7) {
    left: 32%;
    width: 160px;
    height: 160px;
    animation-delay: 2s;
}

.bg-bubbles li:nth-child(8) {
    left: 55%;
    width: 20px;
    height: 20px;
    animation-delay: 15s;
    animation-duration: 10s;
}

.bg-bubbles li:nth-child(9) {
    left: 25%;
    width: 10px;
    height: 10px;
    animation-delay: 2s;
    animation-duration: 40s;
    background-color: rgba(255, 255, 255, 0.3);
}

.bg-bubbles li:nth-child(10) {
    left: 90%;
    width: 160px;
    height: 160px;
    animation-delay: 4s;
}

@-webkit-keyframes square {
    0% {
        transform: translateY(0);
    }
    100% {
        transform: translateY(-700px) rotate(600deg);
    }
}

@keyframes square {
    0% {
        transform: translateY(0);
    }
    100% {
        transform: translateY(-700px) rotate(600deg);  
}
      
<style>
</head>
<body>
    
    <div class="bg">
</div>
<div id="page-wrap">
    
    <div class="wrapper">
        
        <div class="container">
            
            <p style="font-size:40px;">Login</p>
            
            <div class="menu">
                <input id="loginUser" pattern="[A-Z,a-z,0-9,.,-]*" placeholder="Username" type="text"> 
                <input id="loginPassword" pattern="[A-Z,a-z,0-9,.,-]*" placeholder="Password" type="password"> 
                <button id="login" style="width: 138px;">Log In</button> 
                <button id="signup" style="width: 138px;">Sign Up</button> 
                <p><span class="errorMessage"></span></p>   
            </div>
            
        </div>
        
        
        <ul class="bg-bubbles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
   
    
    <div class="">
        
        <header>
            
            <div>
                <span id="headerTitle">Login/Sign-Up</span>
                
                 <span id="navUsername" style="float: right; margin-right: 20px;"></span> <!-- Navigation. We hide it in small screens. -->
                
                <nav>
                    <br /><br /><br />
                    
                    <button class="buttonx" id="logoutBtn" style="display: none;">Logout</button>
                    
                    <button class="buttonx" onclick="image()" style="display: none;">Insert Image</button>
                    
                    
                    <button class="buttonx" onclick="fancy()" style="display: none;">Fancy Text</button>
                </nav>
                
            </div>
            
        </header>
        
        
        <main style="display: flex; align-items: center; flex-direction: column;">
            
            <div class="page-content" style="margin-top: 50px;">
                <!-- content goes here -->
            </div>
            
            
            <div id="chatDiv">
                
                <dialog style="position: fixed; left: 0; bottom: 0; width: 100%; text-align: center">
                    <form method="post" onsubmit="submitMessage()">
                        <div>
                             <input placeholder="Message" class="inputx" style="float:left; display:inline; width: 80%;" id="message" min="3" name="message" title="3 - 100 characters required."> 
                             <button style="float:left; display:inline; width: 15%;" id="submit" type="submit" class="buttonx">Send</button>
                        </div>
                    </form>
                </dialog>
                
                <div id="list"></div>
                <button class="buttonx" id="showMore" onclick="showMoreResults()" style="display: none;">Expand Messages</button>
                
            </div>
            
            
        </main>
        
    </div>
    
</div>
    
</body>
</html>
